<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Progression des Decks</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #F6F6F6;
            color: #1E1E1E;
            margin: 0;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h2 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: #2C3E50;
        }

        canvas {
            max-width: 500px;
            max-height: 500px;
        }
    </style>
</head>

<body>
    <h2>Progression des Decks</h2>
    <canvas id="pieChart"></canvas>

    <script>
        fetch('/api/progress')
            .then(response => response.json())
            .then(data => {
                const labels = data.map(d => d.name);
                const progress = data.map(d => d.progress_percent);

                const ctx = document.getElementById('pieChart').getContext('2d');
                const chart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: "Progression (%)",
                            data: progress,
                            backgroundColor: [
                                '#24527A', // Bleu principal
                                '#8AB6D6', // Bleu clair
                                '#F2C572', // Jaune doux
                                '#DB6B6B', // Rouge doux
                                '#A9D18E'  // Vert doux
                            ],
                            borderColor: '#FFFFFF',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#333',
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            title: {
                                display: true,
                                text: 'Taux de progression par deck',
                                color: '#2C3E50',
                                font: {
                                    size: 18,
                                    weight: 'bold'
                                }
                            }
                        }
                    }
                });
            });
    </script>
</body>

</html>